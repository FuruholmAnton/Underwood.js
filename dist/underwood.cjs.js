"use strict";var $export=require("./_export"),toLength=require("./_to-length"),context=require("./_string-context"),STARTS_WITH="startsWith",$startsWith=""[STARTS_WITH];$export($export.P+$export.F*require("./_fails-is-regexp")(STARTS_WITH),"String",{startsWith:function(e){var t=context(this,e,STARTS_WITH),r=toLength(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return $startsWith?$startsWith.call(t,i,r):t.slice(r,r+i.length)===i}});var $export$1=require("./_export"),toLength$1=require("./_to-length"),context$1=require("./_string-context"),ENDS_WITH="endsWith",$endsWith=""[ENDS_WITH];$export$1($export$1.P+$export$1.F*require("./_fails-is-regexp")(ENDS_WITH),"String",{endsWith:function(e){var t=context$1(this,e,ENDS_WITH),r=arguments.length>1?arguments[1]:void 0,i=toLength$1(t.length),n=void 0===r?i:Math.min(toLength$1(r),i),o=String(e);return $endsWith?$endsWith.call(t,o,n):t.slice(n-o.length,n)===o}});var $export$2=require("./_export"),$forEach=require("./_array-methods")(0),STRICT=require("./_strict-method")([].forEach,!0);$export$2($export$2.P+$export$2.F*!STRICT,"Array",{forEach:function(e){return $forEach(this,e,arguments[1])}});var $export$3=require("./_export");$export$3($export$3.S,"Array",{isArray:require("./_is-array")});var anObject=require("./_an-object"),toObject=require("./_to-object"),toLength$2=require("./_to-length"),toInteger=require("./_to-integer"),advanceStringIndex=require("./_advance-string-index"),regExpExec=require("./_regexp-exec-abstract"),max=Math.max,min=Math.min,floor=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&`']|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&`']|\d\d?)/g,maybeToString=function(e){return void 0===e?e:String(e)};require("./_fix-re-wks")("replace",2,function(e,t,r,i){return[function(i,n){var o=e(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,o,n):r.call(String(o),i,n)},function(e,t){var o=i(r,e,this,t);if(o.done)return o.value;var s=anObject(e),a=String(this),c="function"==typeof t;c||(t=String(t));var u=s.global;if(u){var l=s.unicode;s.lastIndex=0}for(var h=[];;){var f=regExpExec(s,a);if(null===f)break;if(h.push(f),!u)break;""===String(f[0])&&(s.lastIndex=advanceStringIndex(a,toLength$2(s.lastIndex),l))}for(var p="",v=0,d=0;d<h.length;d++){f=h[d];for(var _=String(f[0]),$=max(min(toInteger(f.index),a.length),0),y=[],g=1;g<f.length;g++)y.push(maybeToString(f[g]));var x=f.groups;if(c){var S=[_].concat(y,$,a);void 0!==x&&S.push(x);var m=String(t.apply(void 0,S))}else m=n(_,a,$,y,x,t);$>=v&&(p+=a.slice(v,$)+m,v=$+_.length)}return p+a.slice(v)}];function n(e,t,i,n,o,s){var a=i+e.length,c=n.length,u=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==o&&(o=toObject(o),u=SUBSTITUTION_SYMBOLS),r.call(s,u,function(r,s){var u;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(a);case"<":u=o[s.slice(1,-1)];break;default:var l=+s;if(0===l)return r;if(l>c){var h=floor(l/10);return 0===h?r:h<=c?void 0===n[h-1]?s.charAt(1):n[h-1]+s.charAt(1):r}u=n[l-1]}return void 0===u?"":u})}});var isRegExp=require("./_is-regexp"),anObject$1=require("./_an-object"),speciesConstructor=require("./_species-constructor"),advanceStringIndex$1=require("./_advance-string-index"),toLength$3=require("./_to-length"),callRegExpExec=require("./_regexp-exec-abstract"),regexpExec=require("./_regexp-exec"),fails=require("./_fails"),$min=Math.min,$push=[].push,$SPLIT="split",LENGTH="length",LAST_INDEX="lastIndex",MAX_UINT32=4294967295,SUPPORTS_Y=!fails(function(){});function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _AwaitValue(e){this.wrapped=e}function _AsyncGenerator(e){var t,r;function i(t,r){try{var o=e[t](r),s=o.value,a=s instanceof _AwaitValue;Promise.resolve(a?s.wrapped:s).then(function(e){a?i("next",e):n(o.done?"return":"normal",e)},function(e){i("throw",e)})}catch(e){n("throw",e)}}function n(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?i(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise(function(o,s){var a={key:e,arg:n,resolve:o,reject:s,next:null};r?r=r.next=a:(t=r=a,i(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=[],i=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(n)throw o}}return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}require("./_fix-re-wks")("split",2,function(e,t,r,i){var n;return n="c"=="abbc"[$SPLIT](/(b)*/)[1]||4!="test"[$SPLIT](/(?:)/,-1)[LENGTH]||2!="ab"[$SPLIT](/(?:ab)*/)[LENGTH]||4!="."[$SPLIT](/(.?)(.?)/)[LENGTH]||"."[$SPLIT](/()()/)[LENGTH]>1||""[$SPLIT](/.?/)[LENGTH]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!isRegExp(e))return r.call(i,e,t);for(var n,o,s,a=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,l=void 0===t?MAX_UINT32:t>>>0,h=new RegExp(e.source,c+"g");(n=regexpExec.call(h,i))&&!((o=h[LAST_INDEX])>u&&(a.push(i.slice(u,n.index)),n[LENGTH]>1&&n.index<i[LENGTH]&&$push.apply(a,n.slice(1)),s=n[0][LENGTH],u=o,a[LENGTH]>=l));)h[LAST_INDEX]===n.index&&h[LAST_INDEX]++;return u===i[LENGTH]?!s&&h.test("")||a.push(""):a.push(i.slice(u)),a[LENGTH]>l?a.slice(0,l):a}:"0"[$SPLIT](void 0,0)[LENGTH]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,i){var o=e(this),s=void 0==r?void 0:r[t];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},function(e,t){var o=i(n,e,this,t,n!==r);if(o.done)return o.value;var s=anObject$1(e),a=String(this),c=speciesConstructor(s,RegExp),u=s.unicode,l=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),h=new c(SUPPORTS_Y?s:"^(?:"+s.source+")",l),f=void 0===t?MAX_UINT32:t>>>0;if(0===f)return[];if(0===a.length)return null===callRegExpExec(h,a)?[a]:[];for(var p=0,v=0,d=[];v<a.length;){h.lastIndex=SUPPORTS_Y?v:0;var _,$=callRegExpExec(h,SUPPORTS_Y?a:a.slice(v));if(null===$||(_=$min(toLength$3(h.lastIndex+(SUPPORTS_Y?0:v)),a.length))===p)v=advanceStringIndex$1(a,v,u);else{if(d.push(a.slice(p,v)),d.length===f)return d;for(var y=1;y<=$.length-1;y++)if(d.push($[y]),d.length===f)return d;v=p=_}}return d.push(a.slice(p)),d}]}),"function"==typeof Symbol&&Symbol.asyncIterator&&(_AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),_AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},_AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},_AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)};var $export$4=require("./_export");$export$4($export$4.S+$export$4.F,"Object",{assign:require("./_object-assign")});var $export$5=require("./_export");$export$5($export$5.P,"Function",{bind:require("./_bind")});for(var $iterators=require("./es6.array.iterator"),getKeys=require("./_object-keys"),redefine=require("./_redefine"),global=require("./_global"),hide=require("./_hide"),Iterators=require("./_iterators"),wks=require("./_wks"),ITERATOR=wks("iterator"),TO_STRING_TAG=wks("toStringTag"),ArrayValues=Iterators.Array,DOMIterables={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},collections=getKeys(DOMIterables),i=0;i<collections.length;i++){var key,NAME=collections[i],explicit=DOMIterables[NAME],Collection=global[NAME],proto=Collection&&Collection.prototype;if(proto&&(proto[ITERATOR]||hide(proto,ITERATOR,ArrayValues),proto[TO_STRING_TAG]||hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=ArrayValues,explicit))for(key in $iterators)proto[key]||redefine(proto,key,$iterators[key],!0)}var addToUnscopables=require("./_add-to-unscopables"),step=require("./_iter-step"),Iterators$1=require("./_iterators"),toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(e,t){this._t=toIObject(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,step(1)):step(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),Iterators$1.Arguments=Iterators$1.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");var $at=require("./_string-at")(!0);require("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=$at(t,r),this._i+=e.length,{value:e,done:!1})});var strong=require("./_collection-strong"),validate=require("./_validate-collection"),MAP="Map";module.exports=require("./_collection")(MAP,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=strong.getEntry(validate(this,MAP),e);return t&&t.v},set:function(e,t){return strong.def(validate(this,MAP),0===e?0:e,t)}},strong,!0);var $export$6=require("./_export"),$indexOf=require("./_array-includes")(!1),$native=[].indexOf,NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;$export$6($export$6.P+$export$6.F*(NEGATIVE_ZERO||!require("./_strict-method")($native)),"Array",{indexOf:function(e){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,e,arguments[1])}});var Resize=function(){function e(){var t=this;_classCallCheck(this,e),this.functions=[],window.addEventListener("resize",function(e){for(var r=0;r<t.functions.length;r++){var i=t.functions[r];"function"==typeof i?i(e):console.warn("Incorrect function",i)}},!1)}return _createClass(e,[{key:"add",value:function(e){this.functions.push(e)}},{key:"remove",value:function(e){this.functions.splice(this.functions.indexOf(e))}}]),e}(),resize=new Resize,$export$7=require("./_export"),$includes=require("./_array-includes")(!0);$export$7($export$7.P,"Array",{includes:function(e){return $includes(this,e,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")("includes");var $export$8=require("./_export"),context$2=require("./_string-context"),INCLUDES="includes";$export$8($export$8.P+$export$8.F*require("./_fails-is-regexp")(INCLUDES),"String",{includes:function(e){return!!~context$2(this,e,INCLUDES).indexOf(e,arguments.length>1?arguments[1]:void 0)}});var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,LIBRARY=require("./_library"),global$1=require("./_global"),ctx=require("./_ctx"),classof=require("./_classof"),$export$9=require("./_export"),isObject=require("./_is-object"),aFunction=require("./_a-function"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),speciesConstructor$1=require("./_species-constructor"),task=require("./_task").set,microtask=require("./_microtask")(),newPromiseCapabilityModule=require("./_new-promise-capability"),perform=require("./_perform"),userAgent=require("./_user-agent"),promiseResolve=require("./_promise-resolve"),PROMISE="Promise",TypeError$1=global$1.TypeError,process=global$1.process,versions=process&&process.versions,v8=versions&&versions.v8||"",$Promise=global$1[PROMISE],isNode="process"==classof(process),empty=function(){},newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f,USE_NATIVE=!!function(){try{var e=$Promise.resolve(1),t=(e.constructor={})[require("./_wks")("species")]=function(e){e(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&e.then(empty)instanceof t&&0!==v8.indexOf("6.6")&&-1===userAgent.indexOf("Chrome/66")}catch(e){}}(),isThenable=function(e){var t;return!(!isObject(e)||"function"!=typeof(t=e.then))&&t},notify=function(e,t){if(!e._n){e._n=!0;var r=e._c;microtask(function(){for(var i=e._v,n=1==e._s,o=0,s=function(t){var r,o,s,a=n?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{a?(n||(2==e._h&&onHandleUnhandled(e),e._h=1),!0===a?r=i:(l&&l.enter(),r=a(i),l&&(l.exit(),s=!0)),r===t.promise?u(TypeError$1("Promise-chain cycle")):(o=isThenable(r))?o.call(r,c,u):c(r)):u(i)}catch(e){l&&!s&&l.exit(),u(e)}};r.length>o;)s(r[o++]);e._c=[],e._n=!1,t&&!e._h&&onUnhandled(e)})}},onUnhandled=function(e){task.call(global$1,function(){var t,r,i,n=e._v,o=isUnhandled(e);if(o&&(t=perform(function(){isNode?process.emit("unhandledRejection",n,e):(r=global$1.onunhandledrejection)?r({promise:e,reason:n}):(i=global$1.console)&&i.error&&i.error("Unhandled promise rejection",n)}),e._h=isNode||isUnhandled(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},isUnhandled=function(e){return 1!==e._h&&0===(e._a||e._c).length},onHandleUnhandled=function(e){task.call(global$1,function(){var t;isNode?process.emit("rejectionHandled",e):(t=global$1.onrejectionhandled)&&t({promise:e,reason:e._v})})},$reject=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),notify(t,!0))},$resolve=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw TypeError$1("Promise can't be resolved itself");(t=isThenable(e))?microtask(function(){var i={_w:r,_d:!1};try{t.call(e,ctx($resolve,i,1),ctx($reject,i,1))}catch(e){$reject.call(i,e)}}):(r._v=e,r._s=1,notify(r,!1))}catch(e){$reject.call({_w:r,_d:!1},e)}}};USE_NATIVE||($Promise=function(e){anInstance(this,$Promise,PROMISE,"_h"),aFunction(e),Internal.call(this);try{e(ctx($resolve,this,1),ctx($reject,this,1))}catch(e){$reject.call(this,e)}},(Internal=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=require("./_redefine-all")($Promise.prototype,{then:function(e,t){var r=newPromiseCapability(speciesConstructor$1(this,$Promise));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=isNode?process.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&notify(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal;this.promise=e,this.resolve=ctx($resolve,e,1),this.reject=ctx($reject,e,1)},newPromiseCapabilityModule.f=newPromiseCapability=function(e){return e===$Promise||e===Wrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)}),$export$9($export$9.G+$export$9.W+$export$9.F*!USE_NATIVE,{Promise:$Promise}),require("./_set-to-string-tag")($Promise,PROMISE),require("./_set-species")(PROMISE),Wrapper=require("./_core")[PROMISE],$export$9($export$9.S+$export$9.F*!USE_NATIVE,PROMISE,{reject:function(e){var t=newPromiseCapability(this);return(0,t.reject)(e),t.promise}}),$export$9($export$9.S+$export$9.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function(e){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,e)}}),$export$9($export$9.S+$export$9.F*!(USE_NATIVE&&require("./_iter-detect")(function(e){$Promise.all(e).catch(empty)})),PROMISE,{all:function(e){var t=this,r=newPromiseCapability(t),i=r.resolve,n=r.reject,o=perform(function(){var r=[],o=0,s=1;forOf(e,!1,function(e){var a=o++,c=!1;r.push(void 0),s++,t.resolve(e).then(function(e){c||(c=!0,r[a]=e,--s||i(r))},n)}),--s||i(r)});return o.e&&n(o.v),r.promise},race:function(e){var t=this,r=newPromiseCapability(t),i=r.reject,n=perform(function(){forOf(e,!1,function(e){t.resolve(e).then(r.resolve,i)})});return n.e&&i(n.v),r.promise}});var dP=require("./_object-dp").f,FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/,NAME$1="name";function bind(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach(function(t){if(!e[t])return console.warn("Method '".concat(t,"' does not exist on ").concat(_typeof(e),":"),e);e[t]=e[t].bind(e)})}NAME$1 in FProto||require("./_descriptors")&&dP(FProto,NAME$1,{configurable:!0,get:function(){try{return(""+this).match(nameRE)[1]}catch(e){return""}}});var customEvents={};function trigger(e,t){var r;if(customEvents.hasOwnProperty(t))r=customEvents[t];else{try{r=new Event(t)}catch(e){(r=document.createEvent("Event")).initEvent(t,!0,!0)}customEvents[t]=r}e.dispatchEvent(r)}var View=function(){function e(t){_classCallCheck(this,e),this.defaultUI={},this.ui={},this.defaultEvents={},this.events={},this.eventsMap=new Map,this._isDestroyed=!1,t&&t.el&&(this.el=t.el)}return _createClass(e,[{key:"render",value:function(){"string"==typeof this.el&&(this.el=this.getElementBySelector(this.el)),this.initUI(),"function"==typeof this.init&&this.init(),this.initEvents(),resize.add(this.onResize.bind(this))}},{key:"initUI",value:function(){this.uiSelectors=Object.assign(this.defaultUI,this.ui),this._ui=Object.assign({},this.ui),this.bindUIElements()}},{key:"bindUIElements",value:function(){for(var e in this.ui={},this.uiSelectors)if(this.uiSelectors.hasOwnProperty(e)){var t=this.uiSelectors[e];this.ui[e]=this.getElementBySelector(t)}}},{key:"initEvents",value:function(){this.eventsSelectors=Object.assign(this.defaultEvents,this.events),this._events=Object.assign({},this.events),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this;for(var t in this.unbindEvents(),this.eventsSelectors){if(this.eventsSelectors.hasOwnProperty(t))if("continue"===function(){var r=e.eventsSelectors[t],i=_slicedToArray(t.split(" "),2),n=i[0],o=i[1];n=n.replace(/:/gi,"");var s=!!e[r]&&e[r].bind(e);if(!s)return"continue";var a=o?e.ui[o.replace("@ui.","")]:e.el;if(a){var c=function(t){t.addEventListener(n,s,!1);var r=e.eventsMap.has(t)?e.eventsMap.get(t):[];r.push({event:n,func:s}),e.eventsMap.set(t,r)};Array.isArray(a)?a.forEach(function(e){c(e)}):c(a)}}())continue}}},{key:"unbindEvents",value:function(){this.eventsMap.forEach(function(e,t){e.forEach(function(e){var r=e.event,i=e.func;t.removeEventListener(r,i)})})}},{key:"getElementBySelector",value:function(e){if(void 0===this.el)return console.warn("can't set find ".concat(e," on undefined"),this);if(e instanceof HTMLElement)return e;var t=this.el instanceof HTMLElement?this.el:document.documentElement;if(e.endsWith("[0]")||e.startsWith("#"))return t.querySelector(e.replace("[0]",""));for(var r=t.querySelectorAll(e),i=r.length,n=new Array(i);i--;)n[i]=r[i];return n}},{key:"trigger",value:function(e){e=e.replace(/:/gi,""),trigger(this.el,e)}},{key:"bind",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];bind.apply(void 0,[this].concat(t))}},{key:"onResize",value:function(){}},{key:"destroy",value:function(){"function"==typeof this.beforeDestroy&&this.beforeDestroy(),this.unbindEvents(),this.el.remove(),this._isDestroyed=!0}}]),e}();module.exports=View;
